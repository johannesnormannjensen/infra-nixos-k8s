githubConfigUrl: "https://github.com/yourrepo"
githubConfigSecret: pre-defined-secret

minRunners: 4

runnerGroup: "default"

template:
  spec:
    initContainers:
    - name: init-dind-externals
      image: ghcr.io/actions/actions-runner:latest
      command: ["cp", "-r", "-v", "/home/runner/externals/.", "/home/runner/tmpDir/"]
      volumeMounts:
        - name: dind-externals
          mountPath: /home/runner/tmpDir

    imagePullSecrets:
    - name: runnersecret

    containers:
    - name: runner
      image: ghcr.io/actions/actions-runner:latest
      imagePullPolicy: Always
      command: ["/home/runner/run.sh"]
      resources:
        requests:
          cpu: 1
          memory: 2Gi
        limits:
          cpu: 1
          memory: 2Gi
      env:
        - name: DOCKER_HOST
          value: tcp://localhost:2376
        - name: DOCKER_TLS_VERIFY
          value: "1"
        - name: DOCKER_CERT_PATH
          value: /certs/client
      volumeMounts:
        - name: tool-cache
          mountPath: /opt/hostedtoolcache
        - name: work
          mountPath: /home/runner/_work
        - name: dind-cert
          mountPath: /certs/client
          readOnly: true
    - name: dind
      image: docker:dind
      securityContext:
        privileged: true
      volumeMounts:
        - name: work
          mountPath: /home/runner/_work
        - name: dind-cert
          mountPath: /certs/client
        - name: dind-externals
          mountPath: /home/runner/externals
        - name: daemon-json
          mountPath: /etc/docker/daemon.json
          subPath: daemon.json
          readOnly: true
    volumes:
      - name: tool-cache
        persistentVolumeClaim:
          claimName: cache-pvc
      - name: work
        emptyDir: {}
      - name: dind-cert
        emptyDir: {}
      - name: dind-externals
        emptyDir: {}
      - name: daemon-json
        configMap:
          name: docker-daemon-config
